<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>XTrong Games</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #111111;
        color: #ffffff;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
      }
      header {
        background-color: #000000;
        display: flex;
        align-items: center;
        padding: 10px;
      }
      .logo {
        font-size: 24px;
        font-weight: bold;
      }
      .logo .x {
        color: red; /* X en rojo */
      }
      nav {
        margin-left: auto;
      }
      .admin-button {
        background-color: #333333;
        border: 1px solid red;
        padding: 5px 10px;
        color: #ffffff;
        cursor: pointer;
      }
      .logout-button {
        background-color: #333333;
        border: 1px solid red;
        padding: 5px 10px;
        color: #ffffff;
        cursor: pointer;
        margin-left: 10px;
      }
      .container {
        margin: 20px auto;
        max-width: 1200px;
        text-align: center; /* Para centrar el contenido de forma más visual */
      }
      .section-title {
        font-size: 24px;
        margin-bottom: 10px;
        margin-top: 20px;
        text-transform: uppercase;
      }
      .button-large {
        background-color: red;
        color: #ffffff;
        border: none;
        padding: 15px 25px;
        margin: 10px;
        font-size: 18px;
        cursor: pointer;
      }
      .hidden {
        display: none;
      }
      /* Estilos genéricos de tablas */
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      table thead th {
        background-color: #222222;
        border-bottom: 2px solid red;
        padding: 10px;
        text-align: left;
      }
      table tbody td {
        border-bottom: 1px solid #444444;
        padding: 10px;
      }
      /* Botones y layout interno */
      .back-button {
        background-color: #333333;
        border: 1px solid red;
        color: #ffffff;
        padding: 5px 10px;
        cursor: pointer;
        margin-bottom: 20px;
      }
      /* Responsive */
      @media (max-width: 768px) {
        .section-title {
          font-size: 20px;
        }
        .button-large {
          width: 80%;
          margin: 10px auto;
        }
      }
      /* Panel de administración */
      .admin-container {
        background-color: #222222;
        padding: 10px;
        margin-top: 20px;
        text-align: left;
      }
      .admin-container label {
        display: block;
        margin-bottom: 5px;
      }
      .admin-container input,
      .admin-container select {
        margin-bottom: 10px;
        width: 200px;
      }
      .submit-button {
        background-color: red;
        border: none;
        color: #ffffff;
        padding: 5px 10px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo"><span class="x">X</span>Trong Games</div>
      <nav>
        <button class="admin-button" onclick="showAdminPanel()">Admin Login</button>
        <button class="logout-button hidden" id="logoutButton" onclick="logout()">Salir</button>
      </nav>
    </header>

    <!-- HOME SECTION -->
    <div class="container" id="homeSection">
      <h1 class="section-title">Bienvenidos a XTrong Games</h1>
      <p>Aquí puedes ver la información de la competición</p>
      <button class="button-large" onclick="goToSchedule()">Ver Horario</button>
      <button class="button-large" onclick="goToRanking()">Ver Ranking</button>
    </div>

    <!-- SCHEDULE SECTION -->
    <div class="container hidden" id="scheduleSection">
      <button class="back-button" onclick="goHome()">&larr; Volver</button>
      <h2 class="section-title">Horarios de Salida</h2>
      <p>
        <strong>Heat 1:</strong> 09:00 AM - Atletas 1001 a 1020<br />
        <strong>Heat 2:</strong> 09:30 AM - Atletas 1021 a 1040<br />
        <strong>Heat 3:</strong> 10:00 AM - Atletas 1041 a 1060
      </p>
    </div>

    <!-- RANKING SECTION -->
    <div class="container hidden" id="rankingSection">
      <button class="back-button" onclick="goHome()">&larr; Volver</button>
      <h2 class="section-title">Ranking General (Individual)</h2>
      <p>Clasificación general de los participantes (individuales).</p>
      <table>
        <thead>
          <tr>
            <th>Pos</th>
            <th>Bib</th>
            <th>Nombre</th>
            <th>Sexo</th>
            <th>Rango Edad</th>
            <th>Tiempo Neto</th>
            <th>Dif.</th>
            <th>Pace</th>
            <th>Detalle</th>
          </tr>
        </thead>
        <tbody>
          <!-- Datos de ejemplo -->
          <tr>
            <td>1</td>
            <td>1001</td>
            <td>Juan Pérez</td>
            <td>M</td>
            <td>30-39</td>
            <td>00:58:12</td>
            <td>+0:00</td>
            <td>6:00</td>
            <td><button onclick="showAthleteDetail('1001')">Ver</button></td>
          </tr>
          <tr>
            <td>2</td>
            <td>1002</td>
            <td>Ana García</td>
            <td>F</td>
            <td>20-29</td>
            <td>01:05:47</td>
            <td>+7:35</td>
            <td>6:45</td>
            <td><button onclick="showAthleteDetail('1002')">Ver</button></td>
          </tr>
        </tbody>
      </table>

      <h2 class="section-title">Ranking por Edades</h2>
      <p>Clasificación ordenada por rango de edad (bloques de 10 años).</p>
      <table>
        <thead>
          <tr>
            <th>Pos</th>
            <th>Bib</th>
            <th>Nombre</th>
            <th>Rango Edad</th>
            <th>Tiempo</th>
            <th>Categoría</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>1001</td>
            <td>Juan Pérez</td>
            <td>30-39</td>
            <td>00:58:12</td>
            <td>Men</td>
          </tr>
          <tr>
            <td>2</td>
            <td>1002</td>
            <td>Ana García</td>
            <td>20-29</td>
            <td>01:05:47</td>
            <td>Women</td>
          </tr>
        </tbody>
      </table>

      <h2 class="section-title">Ranking Parejas Men</h2>
      <p>Parejas masculinas.</p>
      <table>
        <thead>
          <tr>
            <th>Pos</th>
            <th>Nombres</th>
            <th>Rango Edad P1</th>
            <th>Rango Edad P2</th>
            <th>Tiempo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Carlos & Pedro</td>
            <td>30-39</td>
            <td>40-49</td>
            <td>01:10:30</td>
          </tr>
        </tbody>
      </table>

      <h2 class="section-title">Ranking Parejas Women</h2>
      <p>Parejas femeninas.</p>
      <table>
        <thead>
          <tr>
            <th>Pos</th>
            <th>Nombres</th>
            <th>Rango Edad P1</th>
            <th>Rango Edad P2</th>
            <th>Tiempo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>María & Julia</td>
            <td>20-29</td>
            <td>30-39</td>
            <td>01:15:00</td>
          </tr>
        </tbody>
      </table>

      <h2 class="section-title">Ranking Parejas Mixto</h2>
      <p>Parejas mixtas.</p>
      <table>
        <thead>
          <tr>
            <th>Pos</th>
            <th>Nombres</th>
            <th>Rango Edad P1</th>
            <th>Rango Edad P2</th>
            <th>Tiempo</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Pedro & Laura</td>
            <td>30-39</td>
            <td>20-29</td>
            <td>01:02:30</td>
          </tr>
        </tbody>
      </table>

      <div style="margin-top: 30px; background-color: #222222; padding: 10px;">
        <h3>Sorteo / Votación</h3>
        <p>Participa en la votación y entrarás en el sorteo.</p>
        <button onclick="participarSorteo()">Participar</button>
      </div>
    </div>

    <!-- DETAIL SECTION -->
    <div class="container hidden" id="detailSection">
      <button class="back-button" onclick="goToRanking()">&larr; Volver</button>
      <h2 class="section-title">Detalle del Atleta</h2>
      <p id="detailHeader">Información del Atleta</p>

      <table>
        <thead>
          <tr>
            <th>Segmento</th>
            <th>Tiempo</th>
          </tr>
        </thead>
        <tbody id="detailTableBody">
        </tbody>
      </table>
    </div>

    <!-- ADMIN PANEL -->
    <div class="container hidden" id="adminPanel">
      <h2>Panel de Administración</h2>
      <div class="admin-container">
        <h3>Añadir fondo para pantalla principal</h3>
        <label for="publicBackground">Seleccionar Fondo:</label>
        <input type="file" id="publicBackground" accept="image/*" />
        <button onclick="cambiarFondoPublico()">Cambiar Fondo</button>
      </div>

      <div class="admin-container">
        <h3>Añadir Atleta / Pareja</h3>
        <label for="categorySelect">Categoría:</label>
        <select id="categorySelect" onchange="onCategoryChange()">
          <option value="individual">Individual</option>
          <option value="parejas">Parejas</option>
        </select>
        <br />
        <div id="individualForm">
          <label for="individualName">Nombre:</label>
          <input type="text" id="individualName" /><br />
          <label for="individualAge">Edad:</label>
          <input type="number" id="individualAge" /><br />
          <label for="genderSelect">Género:</label>
          <select id="genderSelect">
            <option value="men">Men</option>
            <option value="women">Women</option>
          </select><br />
          <button class="submit-button" onclick="addIndividual()">Añadir Individual</button>
        </div>
        <div id="parejasForm" class="hidden">
          <label for="pareja1Name">Nombre Persona 1:</label>
          <input type="text" id="pareja1Name" /><br />
          <label for="pareja1Age">Edad Persona 1:</label>
          <input type="number" id="pareja1Age" /><br />
          <label for="pareja2Name">Nombre Persona 2:</label>
          <input type="text" id="pareja2Name" /><br />
          <label for="pareja2Age">Edad Persona 2:</label>
          <input type="number" id="pareja2Age" /><br />
          <label for="genderPairSelect">Género Parejas:</label>
          <select id="genderPairSelect">
            <option value="men">Parejas Men</option>
            <option value="women">Parejas Women</option>
            <option value="mixto">Parejas Mixto</option>
          </select><br />
          <button class="submit-button" onclick="addPareja()">Añadir Pareja</button>
        </div>
      </div>
    </div>

    <script>
      let isAdminLoggedIn = false;
      const adminUsername = "Xone";
      const adminPassword = "XStrong";

      // Carga del fondo (si existe) al iniciar
      window.addEventListener("load", () => {
        const savedBackground = localStorage.getItem("xtrongBackground");
        if (savedBackground) {
          document.body.style.backgroundImage = `url(${savedBackground})`;
        }
      });

      function showAdminPanel() {
        const username = prompt("Usuario:");
        const password = prompt("Contraseña:");

        if (username === adminUsername && password === adminPassword) {
          isAdminLoggedIn = true;
          document.getElementById("adminPanel").classList.remove("hidden");
          document.getElementById("logoutButton").classList.remove("hidden");
        } else {
          alert("Credenciales incorrectas.");
        }
      }

      function logout() {
        isAdminLoggedIn = false;
        document.getElementById("adminPanel").classList.add("hidden");
        document.getElementById("logoutButton").classList.add("hidden");
      }

      function cambiarFondoPublico() {
        const fileInput = document.getElementById("publicBackground");
        if (fileInput.files && fileInput.files[0]) {
          const reader = new FileReader();
          reader.onload = function (e) {
            localStorage.setItem("xtrongBackground", e.target.result);
            document.body.style.backgroundImage = `url(${e.target.result})`;
          };
          reader.readAsDataURL(fileInput.files[0]);
        }
      }

      function onCategoryChange() {
        const categorySelect = document.getElementById("categorySelect").value;
        const individualForm = document.getElementById("individualForm");
        const parejasForm = document.getElementById("parejasForm");

        if (categorySelect === "individual") {
          individualForm.classList.remove("hidden");
          parejasForm.classList.add("hidden");
        } else {
          individualForm.classList.add("hidden");
          parejasForm.classList.remove("hidden");
        }
      }

      function addIndividual() {
        const name = document.getElementById("individualName").value;
        const age = document.getElementById("individualAge").value;
        const gender = document.getElementById("genderSelect").value;
        const rango = calcularRangoEdad(age);

        alert(`Atleta Individual añadido: ${name}, ${gender}, Rango: ${rango}`);
        document.getElementById("individualName").value = "";
        document.getElementById("individualAge").value = "";
      }

      function addPareja() {
        const name1 = document.getElementById("pareja1Name").value;
        const age1 = document.getElementById("pareja1Age").value;
        const name2 = document.getElementById("pareja2Name").value;
        const age2 = document.getElementById("pareja2Age").value;
        const genderPair = document.getElementById("genderPairSelect").value;

        const rango1 = calcularRangoEdad(age1);
        const rango2 = calcularRangoEdad(age2);

        alert(`Pareja añadida: ${name1} & ${name2}, ${genderPair}, Rangos: ${rango1} y ${rango2}`);
        document.getElementById("pareja1Name").value = "";
        document.getElementById("pareja1Age").value = "";
        document.getElementById("pareja2Name").value = "";
        document.getElementById("pareja2Age").value = "";
      }

      function calcularRangoEdad(age) {
        const base = Math.floor(age / 10) * 10;
        return `${base}-${base + 9}`;
      }

      // Navegación
      function goHome() {
        hideAll();
        document.getElementById("homeSection").classList.remove("hidden");
      }

      function goToSchedule() {
        hideAll();
        document.getElementById("scheduleSection").classList.remove("hidden");
      }

      function goToRanking() {
        hideAll();
        document.getElementById("rankingSection").classList.remove("hidden");
      }

      function hideAll() {
        document.getElementById("homeSection").classList.add("hidden");
        document.getElementById("scheduleSection").classList.add("hidden");
        document.getElementById("rankingSection").classList.add("hidden");
        document.getElementById("detailSection").classList.add("hidden");
      }

      // Mostrar detalles de atleta
      function showAthleteDetail(bib) {
        hideAll();
        document.getElementById("detailSection").classList.remove("hidden");

        document.getElementById("detailHeader").textContent = `Detalle del Atleta BIB: ${bib}`;
        const detailTableBody = document.getElementById("detailTableBody");
        detailTableBody.innerHTML = "";
        // Ejemplo de splits
        const splits = [
          { segment: "Salida - 1km", time: "05:00" },
          { segment: "1km - 2km", time: "05:12" },
          { segment: "2km - 3km", time: "05:15" },
          { segment: "3km - 4km", time: "05:20" },
          { segment: "4km - Meta", time: "05:25" },
        ];
        splits.forEach((s) => {
          const tr = document.createElement("tr");
          const tdSeg = document.createElement("td");
          tdSeg.textContent = s.segment;
          const tdTime = document.createElement("td");
          tdTime.textContent = s.time;
          tr.appendChild(tdSeg);
          tr.appendChild(tdTime);
          detailTableBody.appendChild(tr);
        });
      }

      function goToRanking() {
        hideAll();
        document.getElementById("rankingSection").classList.remove("hidden");
      }

      function participarSorteo() {
        alert("Gracias por participar en el sorteo.");
      }
    </script>
  </body>
</html>
